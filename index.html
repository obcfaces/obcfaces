<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OBC faces of Philippines - Global Online Beauty Contest</title>
    <meta name="description" content="Global Online Beauty & Model Contest. Natural. Honest. Voted by People. Upload your photos and try to win!" />
  </head>
  <body>
    <div id="root">
      <div id="loading-screen" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #3B82F6, #1E40AF);
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        z-index: 10000;
      ">
        <h1 style="font-size: 24px; margin-bottom: 20px;">OBC Faces of Philippines</h1>
        <div style="
          width: 50px;
          height: 50px;
          border: 3px solid rgba(255,255,255,0.3);
          border-top: 3px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-bottom: 20px;
        "></div>
        <p id="status">Загрузка приложения...</p>
        <p id="debug" style="font-size: 12px; margin-top: 20px; opacity: 0.7;"></p>
      </div>
    </div>
    
    <style>
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
    
    <script>
      // Mobile debug info
      document.getElementById('debug').innerHTML = 
        'User Agent: ' + navigator.userAgent.substring(0, 50) + '...<br>' +
        'Screen: ' + screen.width + 'x' + screen.height + '<br>' +
        'Viewport: ' + window.innerWidth + 'x' + window.innerHeight;
      
      // Error handling
      window.addEventListener('error', function(e) {
        document.getElementById('status').innerHTML = 'Ошибка: ' + e.message;
        console.error('Global error:', e);
      });
      
      window.addEventListener('unhandledrejection', function(e) {
        document.getElementById('status').innerHTML = 'Promise error: ' + e.reason;
        console.error('Promise rejection:', e);
      });
      
      // Module loading detection
      if (!('type' in HTMLScriptElement.prototype && HTMLScriptElement.prototype.type === 'module')) {
        document.getElementById('status').innerHTML = 'ES modules не поддерживаются';
      }
    </script>
    
    <script type="module">
      try {
        console.log('ES module script started');
        document.getElementById('status').innerHTML = 'Инициализация модулей...';
        import('./src/main.tsx').then(() => {
          document.getElementById('loading-screen').style.display = 'none';
        }).catch(err => {
          console.error('Module import error:', err);
          document.getElementById('status').innerHTML = 'Ошибка загрузки: ' + err.message;
        });
      } catch (err) {
        console.error('Module script error:', err);
        document.getElementById('status').innerHTML = 'Ошибка скрипта: ' + err.message;
      }
    </script>
  </body>
</html>
